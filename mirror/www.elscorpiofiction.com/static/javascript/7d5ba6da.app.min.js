!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={init:function(b,c){this.$element=a(b),this.options=this.getOptions(c),this.$window=a(window),this.options.offset.top||(this.options.offset.top=this.$element.offset().top-10),this.$window.on({"scroll.affix":a.proxy(this.checkPosition,this),"click.affix":a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)}),this.initialwidth=this.$element.width()===this.$element.parent().width()?"auto":this.$element.width(),this.checkPosition()},getOptions:function(b){return a.extend({},a.fn.affix.defaults,this.$element.data(),b)},checkPosition:function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="wy-affix wy-affix-top wy-affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=this.$element.height()>=this.$window.height()?"top":this.options.minWidth>=this.$window.width()?"top":!(null!==this.unpin&&d+this.unpin<=e.top)&&(null!==g&&e.top+this.$element.height()>=c-g?"bottom":null!==h&&d<=h&&"top"),this.affixed!==b&&(this.$element.width(b?this.initialWidth:this.$element.width()),this.affixed=b,this.unpin="bottom"===b?e.top-d:null,this.$element.removeClass(i).addClass("wy-affix"+(b?"-"+b:"")),this.$element.trigger("affix",b))}}},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:{},minWidth:480,minHeight:function(){}},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(a,b){var c=function(a,b,c){var d;return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}};jQuery.fn[b]=function(a){return a?this.bind("resize",c(a)):this.trigger(b)}}(jQuery,"smartresize"),function(a){a.fn.fluidbox=function(b){var c=a.extend(!0,{viewportFill:.95,overlayColor:"rgba(255,255,255,.85)",debounceResize:!0,stackIndex:1e3,stackIndexDelta:10,closeTrigger:[{selector:".fluidbox-overlay",event:"click"},{selector:"document",event:"keyup",keyCode:27}]},b);c.stackIndex<c.stackIndexDelta&&(c.stackIndexDelta=c.stackIndex),$fbOverlay=a("<div />",{class:"fluidbox-overlay",css:{"background-color":c.overlayColor,"z-index":c.stackIndex}});var d,e=this,f=a(window),g=function(){a(".fluidbox-opened").trigger("click")},h=function(a){var b=a.find("img"),c=a.find(".fluidbox-ghost"),d=a.find(".fluidbox-wrap"),e=f.scrollTop()-b.offset().top+.5*(b.data("imgHeight")*(b.data("imgScale")-1))+.5*(f.height()-b.data("imgHeight")*b.data("imgScale")),g=.5*(b.data("imgWidth")*(b.data("imgScale")-1))+.5*(f.width()-b.data("imgWidth")*b.data("imgScale"))-b.offset().left,h=b.data("imgScale");c.css({transform:"translate("+parseInt(10*g)/10+"px,"+parseInt(10*e)/10+"px) scale("+parseInt(1e3*h)/1e3+")",top:b.offset().top-d.offset().top,left:b.offset().left-d.offset().left})},i=function(){e.each(function(){j(a(this))})},j=function(a){function b(){i.imgWidth=e.width(),i.imgHeight=e.height(),i.imgRatio=e.width()/e.height(),g.css({width:e.width(),height:e.height(),top:e.offset().top-h.offset().top+parseInt(e.css("borderTopWidth"))+parseInt(e.css("paddingTop")),left:e.offset().left-h.offset().left+parseInt(e.css("borderLeftWidth"))+parseInt(e.css("paddingLeft"))}),d>i.imgRatio?i.imgScale=f.height()*c.viewportFill/e.height():i.imgScale=f.width()*c.viewportFill/e.width()}if(d=f.width()/f.height(),a.hasClass("fluidbox")){var e=a.find("img"),g=a.find(".fluidbox-ghost"),h=a.find(".fluidbox-wrap"),i=e.data();b(),e.load(b)}},k=function(b){if(a(this).hasClass("fluidbox")){var d=a(this),e=a(this).find("img"),f=a(this).find(".fluidbox-ghost"),g=a(this).find(".fluidbox-wrap"),i={};0!==a(this).data("fluidbox-state")&&a(this).data("fluidbox-state")?(d.data("fluidbox-state",0).removeClass("fluidbox-opened").addClass("fluidbox-closed"),i.open&&window.clearTimeout(i.open),i.close=window.setTimeout(function(){a(".fluidbox-overlay").remove(),g.css({"z-index":c.stackIndex-c.stackIndexDelta})},10),a(".fluidbox-overlay").css({opacity:0}),f.css({transform:"translate(0,0) scale(1)",opacity:0,top:e.offset().top-g.offset().top+parseInt(e.css("borderTopWidth"))+parseInt(e.css("paddingTop")),left:e.offset().left-g.offset().left+parseInt(e.css("borderLeftWidth"))+parseInt(e.css("paddingLeft"))}),e.css({opacity:1})):a("<img />",{src:e.attr("src")}).load(function(){d.append($fbOverlay).data("fluidbox-state",1).removeClass("fluidbox-closed").addClass("fluidbox-opened"),i.close&&window.clearTimeout(i.close),i.open=window.setTimeout(function(){a(".fluidbox-overlay").css({opacity:1})},10),a(".fluidbox-wrap").css({zIndex:c.stackIndex-c.stackIndexDelta-1}),g.css({"z-index":c.stackIndex+c.stackIndexDelta}),f.css({"background-image":"url("+e.attr("src")+")",opacity:1}),e.css({opacity:0}),a("<img />",{src:d.attr("href")}).load(function(){f.css({"background-image":"url("+d.attr("href")+")"})}),h(d)}),b.preventDefault()}};c.closeTrigger&&a.each(c.closeTrigger,function(b){var d=c.closeTrigger[b];"window"!=d.selector?"document"==d.selector?d.keyCode?a(document).on(d.event,function(a){a.keyCode==d.keyCode&&g()}):a(document).on(d.event,g):a(document).on(d.event,c.closeTrigger[b].selector,g):f.on(d.event,g)}),e.each(function(b){if(a(this).is("a")&&1===a(this).children().length&&a(this).children().is("img")){var d=a("<div />",{class:"fluidbox-wrap",css:{"z-index":c.stackIndex-c.stackIndexDelta}}),e=a(this);e.addClass("fluidbox").wrapInner(d).find("img").css({opacity:1}).after('<div class="fluidbox-ghost" />').each(function(){var b=a(this);b.width()>0&&b.height()>0?(j(e),e.click(k)):b.load(function(){j(e),e.click(k)})})}});var l=function(){i();var b=a("a.fluidbox.fluidbox-opened");b.length>0&&h(b)};return c.debounceResize?a(window).smartresize(l):a(window).resize(l),e}}(jQuery),$(document).ready(function(){$(".fluidbox, article a").fluidbox()});